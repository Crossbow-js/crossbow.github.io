letsencrypt:
  command: >
    -c "sleep 10 && certbot certonly --standalone -d crossbow.io -d
    www.crossbow.io -d app.crossbow.io --text --agree-tos --email
    shane.osbourne8@example.com --server
    https://acme-v01.api.letsencrypt.org/directory --rsa-key-size 4096 --verbose
    --renew-by-default --standalone-supported-challenges http-01"
  entrypoint: bash
  environment:
    - TERM=xterm
  image: 'quay.io/letsencrypt/letsencrypt:latest'
  ports:
    - '80'
    - '443'
  volumes:
    - /etc/letsencrypt
    - /var/lib/letsencrypt
nginx:
  autoredeploy: true
  cpu_shares: 256
  environment:
    - MY_DOMAIN_NAME=crossbow.io
  image: 'shakyshane/crossbow-website:latest'
  links:
    - letsencrypt
  mem_limit: 2048m
  ports:
    - '80:80'
    - '443:443'
  volumes_from:
    - letsencrypt
